<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C3-Tanol - Comparador Gasolina vs Álcool</title>
    
    <link rel="manifest" href="/c3tanol/manifest.json"> 
    
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Define a fonte Inter como padrão (pode ser carregada pelo Tailwind, mas garantimos aqui) */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #000000; /* Fundo alterado para preto */
        }
        .card-bg {
            background-color: #242424; /* Fundo dos cards mais escuro que o corpo */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.2), 0 2px 4px -2px rgba(0, 0, 0, 0.2);
        }
        /* Customiza o input para ficar com o estilo do print */
        .fuel-input {
            border: 1px solid #3d3d3d;
            background-color: #242424;
            color: white;
            padding: 1rem 0.75rem;
            font-size: 1.5rem;
            text-align: right;
            transition: border-color 0.2s;
        }
        .fuel-input:focus {
            outline: none;
            border-color: #e34f4f; /* Borda vermelha no foco */
            box-shadow: 0 0 0 1px #e34f4f;
        }
        /* Cor principal vermelha, usada no título e cards de resultado */
        .color-c3 {
            color: #e34f4f; 
        }
    </style>
</head>
<body class="bg-gray-900 text-white min-h-screen p-4 flex flex-col items-center">

    <div class="max-w-md w-full space-y-6 pt-8 pb-12">

        <header class="text-center space-y-1 mb-10">
            <img src="/c3tanol/icons/icon-192x192.png" alt="C3-Tanol Icon" class="mx-auto h-16 w-16 mb-2"> 
            
            <h1 class="text-4xl font-extrabold color-c3">C3-Tanol</h1>
            <p class="text-gray-400 text-lg">Descubra quando vale a pena abastecer com etanol</p>
        </header>

        <div class="card-bg p-6 rounded-xl">
            <h2 class="text-xl font-semibold flex items-center mb-3">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#e34f4f" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mr-3"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path><path d="M18 2v6"></path><path d="M14 2v4"></path><path d="M6 6h4"></path><path d="M22 17H2"></path></svg>
                Preço da Gasolina
            </h2>
            <div class="relative">
                <span class="absolute left-3 top-1/2 -translate-y-1/2 text-2xl text-gray-400 font-medium">R$</span>
                <input 
                    type="number" 
                    id="gasolinaInput" 
                    class="fuel-input w-full rounded-lg appearance-none text-2xl font-bold pl-16 pr-4" 
                    placeholder="0,00"
                    step="0.01"
                    min="0"
                    oninput="calcularEtapas()"
                >
            </div>
        </div>
        
        <div id="resultadoCard" class="bg-red-700 p-6 rounded-xl hidden text-center shadow-lg transition-all duration-300">
            <p class="text-white text-lg font-medium opacity-90 mb-2">A gasolina hoje está</p>
            <h3 id="precoGasolinaAtual" class="text-white text-5xl font-extrabold mb-5">R$ 0,00</h3>
            
            <p class="text-white text-lg font-medium mb-4">Escolha o etanol se estiver na faixa de:</p>
            
            <div class="flex justify-between items-center space-x-2">
                
                <div class="flex-1 bg-red-800 p-3 rounded-lg shadow-inner">
                    <span class="text-sm font-semibold text-red-300">67%</span>
                    <p id="valor67" class="text-white text-2xl font-bold mt-1">R$ 0,00</p>
                </div>
                
                <span class="text-white text-xl font-bold">a</span>
                
                <div class="flex-1 bg-red-800 p-3 rounded-lg shadow-inner">
                    <span class="text-sm font-semibold text-red-300">70%</span>
                    <p id="valor70" class="text-white text-2xl font-bold mt-1">R$ 0,00</p>
                </div>
            </div>
        </div>

        <div class="card-bg p-6 rounded-xl">
            <h2 class="text-xl font-semibold flex items-center mb-3">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#facc15" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6 mr-3"><path d="M15 14c.2-1 .6-1.5 1-2a2.76 2.76 0 0 0 0-4a2.76 2.76 0 0 0-2-2c-.5 0-1.1.2-1.4.7-.3-.5-.9-.7-1.4-.7a2.76 2.76 0 0 0-2 2c.4.5.8 1 1 2"></path><path d="M12 22v-8"></path><path d="M16 22H8"></path></svg>
                Como funciona?
            </h2>
            <p class="text-gray-400 leading-relaxed text-sm">
                O etanol compensa quando seu preço está entre 67% e 70% do valor da gasolina, considerando que ele tem menor poder calorífico.
            </p>
            <p class="text-gray-500 text-xs mt-3">
                Cálculo baseado no rendimento energético do etanol
            </p>
        </div>

    </div>

    <script>
        // Referências aos elementos do DOM
        const gasolinaInput = document.getElementById('gasolinaInput');
        const resultadoCard = document.getElementById('resultadoCard');
        const precoGasolinaAtual = document.getElementById('precoGasolinaAtual');
        const valor67 = document.getElementById('valor67');
        const valor70 = document.getElementById('valor70');

        /**
         * Formata um número para o padrão monetário brasileiro (R$ X,XX).
         * @param {number} valor O valor numérico a ser formatado.
         * @returns {string} O valor formatado.
         */
        function formatarMoeda(valor) {
            return new Intl.NumberFormat('pt-BR', {
                style: 'currency',
                currency: 'BRL',
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            }).format(valor);
        }

        /**
         * Realiza o cálculo e atualiza a interface.
         */
        function calcularEtapas() {
            // Pega o valor do input (usando replace para garantir ponto decimal)
            let precoGasolinaStr = gasolinaInput.value.replace(',', '.');
            let precoGasolina = parseFloat(precoGasolinaStr);

            // Verifica se o valor é um número positivo válido
            if (isNaN(precoGasolina) || precoGasolina <= 0) {
                // Se for inválido, esconde o card de resultado
                resultadoCard.classList.add('hidden');
                return;
            }

            // Garante que o card de resultado esteja visível
            resultadoCard.classList.remove('hidden');

            // 1. Cálculos
            const valorCalculado67 = precoGasolina * 0.67;
            const valorCalculado70 = precoGasolina * 0.70;

            // 2. Atualiza os textos na interface
            
            // Valor da Gasolina no resultado
            precoGasolinaAtual.textContent = formatarMoeda(precoGasolina);

            // Valor do Etanol a 67%
            valor67.textContent = formatarMoeda(valorCalculado67);

            // Valor do Etanol a 70%
            valor70.textContent = formatarMoeda(valorCalculado70);
            
            // Move o foco para o final do input para melhorar a experiência
            gasolinaInput.selectionStart = gasolinaInput.selectionEnd = gasolinaInput.value.length;
        }

        // Executa o cálculo inicial (útil se houver um valor pré-preenchido)
        window.onload = calcularEtapas;
        
        /**
         * REGISTRO DO SERVICE WORKER (ADICIONADO PARA PWA)
         */
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                // O caminho deve ser a URL absoluta onde o service-worker.js estará
                // no GitHub Pages (ex: /c3tanol/service-worker.js)
                navigator.serviceWorker.register('/c3tanol/service-worker.js')
                    .then(registration => {
                        console.log('Service Worker registrado com sucesso:', registration.scope);
                    })
                    .catch(error => {
                        console.log('Falha no registro do Service Worker:', error);
                    });
            });
        }

    </script>
</body>
</html>
